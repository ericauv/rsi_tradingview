import pandas as pd
from stoch_rsi import stoch_rsi_tradingview
from rsi import rsi_tradingview

if __name__ == '__main__':
    formattedData = [
  { 'close': 45117.46 },
  { 'close': 45060.72 },
  { 'close': 44819.75 },
  { 'close': 45342 },
  { 'close': 45379.64 },
  { 'close': 44937.56 },
  { 'close': 45175.91 },
  { 'close': 44949.81 },
  { 'close': 44981.15 },
  { 'close': 45392.28 },
  { 'close': 45366 },
  { 'close': 43985.88 },
  { 'close': 43717.95 },
  { 'close': 43269.57 },
  { 'close': 43000.01 },
  { 'close': 43630.06 },
  { 'close': 43363.9 },
  { 'close': 42820.01 },
  { 'close': 43283.16 },
  { 'close': 43278.34 },
  { 'close': 43014.43 },
  { 'close': 42839.64 },
  { 'close': 42882.53 },
  { 'close': 42634.59 },
  { 'close': 40875.75 },
  { 'close': 40337.06 },
  { 'close': 40635.3 },
  { 'close': 39342.9 },
  { 'close': 39270.33 },
  { 'close': 39422.74 },
  { 'close': 40372.57 },
  { 'close': 40491.13 },
  { 'close': 40359.66 },
  { 'close': 39464.19 },
  { 'close': 38708.85 },
  { 'close': 35060.39 },
  { 'close': 35650 },
  { 'close': 37435.85 },
  { 'close': 37304.85 },
  { 'close': 39638.23 },
  { 'close': 39372.57 },
  { 'close': 38020.96 },
  { 'close': 39340.27 },
  { 'close': 38222.45 },
  { 'close': 38782.93 },
  { 'close': 39073.8 },
  { 'close': 36689.14 },
  { 'close': 35803.92 },
  { 'close': 36973.38 },
  { 'close': 38054.78 },
  { 'close': 38341.24 },
  { 'close': 39423.44 },
  { 'close': 39930.91 },
  { 'close': 39686.97 },
  { 'close': 39946.92 },
  { 'close': 39831.33 },
  { 'close': 39955 },
  { 'close': 40401.24 },
  { 'close': 40458.36 },
  { 'close': 41677.91 },
  { 'close': 41707.78 },
  { 'close': 41447.41 },
  { 'close': 41448.84 },
  { 'close': 39281 },
  { 'close': 39758.07 },
  { 'close': 39775.58 },
  { 'close': 40089.34 },
  { 'close': 39987.56 },
  { 'close': 40655.12 },
  { 'close': 41440 },
  { 'close': 40500.3 },
  { 'close': 41713.51 },
  { 'close': 41405.24 },
  { 'close': 41226.4 },
  { 'close': 40639.82 },
  { 'close': 39924.45 },
  { 'close': 39825.35 },
  { 'close': 40538.34 },
  { 'close': 39822 },
  { 'close': 39996.08 },
  { 'close': 40833.27 },
  { 'close': 40712.16 },
  { 'close': 41090.34 },
  { 'close': 40500 },
  { 'close': 41094.55 },
  { 'close': 37802.26 },
  { 'close': 36818.07 },
  { 'close': 37011 },
  { 'close': 37348.51 },
  { 'close': 37141.95 },
  { 'close': 36043.11 },
  { 'close': 35191.24 },
  { 'close': 36524.01 },
  { 'close': 36610.63 },
  { 'close': 37211.02 },
  { 'close': 37068.13 },
]
    ohlc = pd.DataFrame.from_dict(formattedData)

    rsi = rsi_tradingview(ohlc)
    print("RSI: ")
    for i in range(len(rsi)):
        print(f"Date={ohlc.index[i]}\tRSI={rsi[i]}")

    rsi, stochrsi_K, stochrsi_D = stoch_rsi_tradingview(ohlc)
    print("\n\nSTOCH_RSI: ")
    for i, v in rsi.items():
        print(f"Date={ohlc.index[i]}\tRSI={rsi[i]}\tK={stochrsi_K[i]}\tD={stochrsi_D[i]}")
